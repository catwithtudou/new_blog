# 结论&总结

## 结论


!!! note "关键结论"

    | 设计维度 | 复杂性陷阱 | 简洁性原则 |
    |---------|-----------|-----------|
    | **模块化** | 浅层抽象<br>信息泄漏<br>过度暴露细节 | 创建深层次接口<br>信息隐藏<br>关注抽象而非细节 |
    | **接口设计** | 模糊不清的接口<br>特殊情况过多<br>过度依赖注释 | 简单且一致的接口<br>定义消除错误情况<br>自描述式代码 |
    | **复杂性管理** | 重复代码<br>过度特例化<br>复杂性蔓延 | 战略性思考<br>适度一般化<br>及早消除复杂性 |
    | **文档实践** | 注释与代码分离<br>文档过多或过少<br>重复信息 | 注释靠近相关代码<br>记录非显而易见信息<br>避免文档重复 |
    | **开发思维** | 短视战术编程<br>代码即文档心态<br>过度设计 | 长期投资思维<br>持续改进设计<br>追求恰到好处 |

    良好的软件设计不是一项神秘的艺术，**而是一套可以学习和应用的原则和实践**。通过关注复杂性的根源，应用设计原则，并采取投资思维，任何开发者都能够创建出更简单、更优雅、更易于维护的软件系统。

### 复杂性：软件设计的核心挑战

本书聚焦于一个核心议题：**复杂性**。处理复杂性是软件设计中最重要的挑战，它使系统难以构建和维护，通常也导致系统运行缓慢。书中系统性地探讨了软件设计中复杂性的各个方面。

**本书主要内容回顾**

1. **复杂性的根本原因**：

      - 依赖性（组件间紧密耦合）
      - 模糊性（重要信息不明显）

2. **识别不必要复杂性的危险信号**：

      - 信息泄漏（破坏模块封装）
      - 不必要的错误处理（增加特殊情况）
      - 过于笼统的命名（模糊代码含义）

3. **创建简单系统的关键策略**：

      - 设计深层次且通用的类
      - 通过定义消除错误情况
      - 分离接口文档与实现文档

4. **产生简单设计的思维方式**：

      - 投资思维（短期投入换取长期回报）
      - 战略性思考（而非战术性解决问题）

### 良好设计的权衡与回报

**1. 初期挑战**

良好设计的策略会在项目早期阶段带来一些挑战：

- **需要额外工作**：前期投入时间思考设计
- **学习曲线**：学习良好设计技巧会暂时减慢开发速度
- **可能感觉是"苦差事"**：如果只关注当前代码尽快工作，设计思考可能感觉阻碍了实际目标

**2. 设计的乐趣与价值**

然而，若良好设计是重要目标，本书的思想将使编程更有趣：

- **设计是迷人的谜题**：如何用最简单结构解决特定问题？
- **探索的乐趣**：尝试不同方法，发现简单而强大的解决方案
- **审美满足**：干净、简单和明显的设计本身就是美丽的

**3. 设计投资的回报**

好的设计投资很快就会带来回报：

- **代码重用**：项目初期精心定义的模块可在后续开发中反复使用，节省时间
- **文档价值**：几个月前编写的清晰文档在添加新功能时提供帮助
- **技能增长**：随着设计能力提升，能够越来越快地产出好的设计
- **效率提升**：一旦掌握方法，好的设计实际上并不比快速但草率的设计花费更多时间

### 成为优秀设计师的回报

成为优秀设计师的最大回报是：

- **更多创造性工作**：花更多时间在有趣的设计阶段
- **更少调试挣扎**：不必在复杂脆弱的代码中追踪bug
- **更高质量输出**：更快地生产高质量软件
- **更愉快的体验**：整个软件开发过程变得更加享受

通过培养设计思维和应用本书的原则，软件开发不仅能产出更好的结果，也能成为更令人满足的创造性活动。好的设计不是额外负担，而是提升效率和乐趣的关键因素。



## 总结

### 设计原则小结

1. 复杂性是逐步增加的：您必须努力处理小事情（请参阅 2.4）
2. 能跑起来的的代码是不够的（请参阅 3.2）
3. 持续进行少量投资以改善系统设计（请参阅 3.3）
4. 模块应较深（请参见 4.4）
5. 接口的设计应尽可能简化最常见的用法（请参阅 4.7）。
6. 一个模块具有一个简单的接口比一个简单的实现更重要（请参阅 第八章, 9.8）。
7. 通用模块更深入（请参阅 第六章）。
8. 通用和专用代码分开（请参见 9.4）。
9. 不同的层应具有不同的抽象（请参见 第七章）。
10. 降低复杂度（请参阅 第八章）。
11. 定义不存在的错误（和特殊情况）（请参阅 10.3）。
12. 设计两次（请参阅 第十一章）。
13. 注释应描述代码中不明显的内容（请参见 第十三章）。
14. 软件的设计应易于阅读而不是易于编写（请参见 18.2)）。
15. 软件开发的增量应该是抽象而不是功能（请参见 19.2）。

### 危险信号小结

1. 浅模块：类或方法的接口并不比其实现简单得多
2. 信息泄漏：设计决策反映在多个模块中
3. 时间分解：代码结构基于执行操作的顺序，而不是信息隐藏
4. 过度暴露：API 强制调用者注意很少使用的功能，以便使用常用功能
5. Pass-Through Method：一种方法几乎不执行任何操作，只是将其参数传递给具有相似签名的另一种方法
6. 重复：一遍又一遍的重复代码
7. 特殊通用混合物：特殊用途代码未与通用代码完全分开
8. 联合方法：两种方法之间的依赖性很大，以至于很难理解一种方法的实现而又不理解另一种方法的实现
9. 注释重复代码：注释旁边的代码会立即显示注释中的所有信息
10. 实施文档污染了界面：界面注释描述了所记录事物的用户不需要的实施细节
11. 含糊不清的名称：变量或方法的名称过于精确，以至于它不能传达很多有用的信息
12. 难以选择的名称：很难为实体提供准确而直观的名称
13. 难以描述：为了完整起见，变量或方法的文档必须很长
14. 非显而易见的代码：一段代码的行为或含义不容易理解
