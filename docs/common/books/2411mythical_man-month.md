# 24.11《人月神话》阅读笔记

## 第1章 焦油坑

> 前车之覆，后车之监。 ——荷兰谚语

### 1.1 编程系统产品

- 过去⼏⼗年的⼤型系统开发就犹如这样⼀个焦油坑，**很多⼤型和强壮的动物在其中剧烈地挣扎**。表⾯上看起来好像没有任何⼀个单独的问题会导致困难，每个问题都能获得解决，但是当它们相互纠缠和累积在⼀起的时候，团队的⾏动就会变得越来越慢。对于问题的⿇烦程度，每个⼈似乎都会感到惊讶，并且很难看清问题的本质。不过，**如果我们想解决问题，就必须试图先去了解问题**。

![](https://img.zhengyua.cn/blog/202412010952903.png)

- 右下部分代表编程系统产品。与以上的所有的简单的程序都不同的是，**它的成本⾼达 9 倍**。然⽽只有它才是真正有⽤的产品，**是⼤多数系统开发的⽬标**。

### 1.2 职业的乐趣

- ⾸先，这种乐趣来源于**创建事物的纯粹快乐**。
- 其次，这种快乐来⾃于**开发对他⼈有⽤的东西**。
- 第三，快乐来⾃于整个过程体现出的⼀股**强⼤的魅⼒——将相互啮合的零部件组装在⼀起**，看到它们以精妙的⽅式运⾏着，并收到了预期的效果。
- 第四，这种快乐是**持续学习的快乐**，它来⾃于这项⼯作的⾮重复特性。
- 最后，这种快乐还来⾃于在**易于驾驭的介质上**⼯作。

> 编程的快乐在于它不仅满⾜了我们内⼼深处进⾏创造的渴望，⽽且还唤醒了每个⼈内⼼的情感。

### 1.3 职业的苦恼

- ⾸先，苦恼来⾃**追求完美**。
- 其次，苦恼来⾃**由他⼈来设定⽬标、供给资源和提供信息**。编程⼈员很少能控制⼯作环境和⼯作⽬标。
- 下⼀个苦恼，**设计宏大概念是有趣的，但寻找琐碎的 Bug 却是⼀项重复性的活动**。
- 另外⼈们发现**调试和查错往往是线性收敛的**，或者更糟糕的是，具有⼆次⽅的复杂度。
- 最后⼀个苦恼，有时也是⼀种⽆奈——当投⼊了⼤量⾟苦的劳动，产品在即将完成或者终于完成的时候，**却已显得陈旧过时**。
- 因此，我们所⾯临的挑战和任务是在实际的进度和有效的资源范围内，**寻找解决实际问题的切实可⾏⽅案**。 

> 这就是编程，⼀个许多⼈痛苦挣扎的焦油坑以及⼀种乐趣和苦恼共存的创造性活动。对许多⼈⽽⾔,其中的快乐远远⼤于苦恼。

## 第2章 人月神话

在众多软件项⽬中，缺乏合理的进度安排是造成项⽬滞后的最主要原因，它⽐其他所有因素加起来的影响还要⼤。导致这种灾难如此普遍的原因是什么呢：

- 第一，我们的估算技术还不成熟，说得严重一些，它反映了⼀种悄⽆声息但并不真实的假设——⼀切都将运作良好；
- 第⼆，采用的估算技术隐含地假设人和月可以互换，错误地将进度与⼯作量相互混淆；
- 第三，由于对⾃⼰的估算缺乏信⼼；
- 第四，对进度缺少跟踪和监督；
- 第五，当意识到进度的偏移时，下意识（以及传统）的反应是增加⼈⼒。这就像使⽤汽油灭⽕⼀样，只会使事情更糟；

### 2.1 乐观主义

- **所有的编程⼈员都是乐观主义者**。可能是这种现代魔术特别吸引那些相信美满结局和幻想中的圣母的⼈；也可能是成百上千琐碎的挫折赶⾛了⼤多数⼈，只剩下了那些习惯上只关注结果的⼈；还可能仅仅因为计算机还很年轻，程序员更加年轻，⽽年轻⼈总是些乐观主义者——⽆论是什么样的程序，**结果是⽏庸置疑的：“这次它肯定会运⾏”或者“我刚刚找出最后⼀个错误”**。
- 所以系统编程的进度安排背后的第⼀个错误的假设是：**⼀切都将运作良好，每⼀项任务仅花费它所“应该”花费的时间**。
- 对这种弥漫在编程⼈员中的乐观主义，理应受到慎重的分析。
- 由于物理介质和思路中隐含的不完善性，构思实现起来需要付出时间和精力。对遇到的⼤部分困难，**我们总是倾向于去责怪那些物理介质**，因为无力介质不是“我们的”，而思路是“我们的”。我们的自尊心使判断带上了主观色彩；
- 然⽽计算机粹的思维活动——**编程基于⼗分容易掌握的介质**，编程⼈员通过⾮常纯概念以及灵活的表现形式来开发程序。正是由于介质的易于驾驭，我们期待在实现过程中不会碰到困难，因此造成了乐观主义的弥漫。⽽我们的构思是有缺陷的，因此总会发现 bug。**也就是说我们的乐观主义并不应该是理所应当的**。
- 在单个的任务中，“⼀切都将运转正常”的假设在进度上具有可实现性。因所遇到的延迟是⼀个概率分布曲线，“不会延迟”具有限定的概率，所以现实情况可能会像计划安排的那样顺利。然⽽⼤型的编程⼯作，或多或少包含了很多任务，某些任务间还具有前后的次序，**从⽽⼀切正常的概率变得⾮常⼩，甚⾄接近于零**。

### 2.2 人月

- **第⼆个谬误的思考⽅式是在估计和进度安排中使⽤的⼯作量单位**：⼈⽉。成本的确随开发产品的⼈数和时间的不同，有着很⼤的变化，进度却不是如此。⼈员和时间的关系如图所⽰。因此我认为⽤⼈⽉作为**衡量⼀项⼯作的规模是⼀个危险和带有欺骗性的神话**。它暗⽰着⼈员数量和时间是可以相互替换的。
- 当任务由于次序上的限制不能分解时，**⼈⼿的添加对进度没有帮助**。
- 对于可以分解但⼦任务之间需要相互沟通和交流的任务，**必须在计划⼯作中考虑沟通的⼯作量**。因此在相同⼈⽉的前提下，采⽤增加⼈⼿来减少时间得到的最好情况，还是⽐未调整前差一些。
- 沟通所增加的负担由两个部分组成：**培训和相互的交流**。每个成员需要进⾏技术、项⽬⽬标、总体策略以及⼯作计划的培训。这种培训是不能分解的，因此**这部分增加的⼯作量随⼈员的数量呈线性变化**。相互之间交流的情况更糟⼀些。如果任务的每个部分必须**分别与其他部分单独协作，则⼯作量按照 n(n - 1)/ 2 递增**。所增加的⽤于沟通的**⼯作量可能会完全抵消对原有任务分解所产⽣的作⽤**。
- 因为软件开发本质上是⼀项**系统⼯作——错综复杂关系下的⼀种实践、沟通、交流的⼯作量⾮常⼤**，它很快会消耗任务分解所节省下来的个⼈时间。从⽽添加更多的⼈⼿，**实际上是延长了⽽不是缩短了时间进度**。

### 2.3 系统测试

- 在进度安排中，由于顺序限制所造成的影响，**没有哪个部分⽐单元调试和系统测试所受到的牵涉更彻底**。⽽且需要的时间依赖于所遇到的错误、缺陷的数量及其难以捕捉的程度。
- 对于软件任务的进度安排，以下是我使⽤了很多年的经验法则：
    - 1/3 计划
    - 1/6 编码
    - 1/4 构件测试和早期系统测试
    - 1/4 系统测试，所有的构件已完成
- 在许多重要的⽅⾯，它与传统的进度安排⽅法不同：
    - 分配给计划的时间⽐平常的多
    - 对所完成代码的调试和测试投⼊近⼀半的时间，这⽐平常的安排多很多
    - 容易估计的部分，如编码，仅仅分配了 1/6 的时间
- 通过对传统项⽬进度安排的研究，我发现很少有项⽬允许为测试分配⼀半的时间，但**⼤多数项⽬的测试实际上是花费了进度中⼀半的时间**。
- 特别需要指出的是，**不为系统测试安排⾜够的时间**简直就是⼀场灾难。另外此时此刻的延迟具有**不寻常的、严重的财务和⼼理上的反应**。

### 2.4 怯懦的估算

- 观察⼀下编程⼈员，你可能会发现同厨师⼀样，某项任务的计划进度，可能受限于顾客要求的紧迫程度，**但紧迫程度⽆法控制实际的完成情况**。
- 但为了满⾜顾客期望的⽇期⽽造成的不合理进度安排，在软件领域中却⽐其他任何⼯程领域要普遍得多。⽽且⾮阶段化⽅法的采⽤，少得可怜的数据⽀持，加上完全借助软件经理的直觉，这样的⽅式**很难⽣产出有⼒的、看似可靠的和规避风险的估计**。
- 在基于可靠基础的估算出现之前，项⽬经理需要挺直腰杆，他们的估计，**确信⾃⼰的经验和直觉总⽐从期望派⽣出的结果要强坚持得多**。

### 2.5 重复产生的进度灾难

- ⼀个具有丰富经验的硬件⼯程师的忠告：**“不要让小的偏差留着。”**
- 项⽬经理的相应措施是仔细、认真地调整项⽬，重新安排进度，或者默默地注视着任务由于轻率的设计和不完整的测试⽽被剪除。
- 毫⽆疑问，**重复“灾难”所开发出的产品**，⽐没有增加⼈⼿，⽽是重新安排开发进度所产⽣的产品更差。
- 冒昧地简化⼀下 Brooks 法则：**向进度落后的项⽬中增加⼈⼿，只会使进度更加落后**。这就是除去了神话⾊彩的⼈⽉。**项⽬的时间依赖于顺序上的限制，⼈员的最⼤数量依赖于独⽴⼦任务的数量**。
- 在众多软件项⽬中，**缺乏合理的进度安排是造成项⽬滞后的最主要原因**，它⽐其他所有因素加起来的影响还要⼤。

## 第3章 外科手术团队

> 效率高和效率低的实施者之间个体差异非常大，经常能够达到数量级的水平。

本章的主要内容如下：

二选一的观点“年轻的产品经理更喜欢由一流人才组成的小型精干团队，而不是由几百名（平庸的）程序员来完成项目”实际上回避了关键问题：**如何在有意义的进度安排内构建大型的系统？**

针对该问题，小型精干团队优势在于：

- 高效率的生产力，优秀编程人员和平庸编程人员之间生产力的差异确实比想象中的要更大
- 更少的协作成本，更多的建造人员会带来更多的协作成本

而劣势就在于就在与，在交付真正意义上的大型系统时，其速度太慢了。所以这其实是个取舍的问题，**从效率和概念的完整性角度来看前者更有优势，而对大型系统则需要后者来达到产品预期的交付时间**。

而如何调节该矛盾，作者提出了 Harlan Mills 的建议：大型项目的每一部分都由一个团队解决，但是该团队以**类似外科手术团队的方式组建，而不是杀猪团队**，即不是每个成员都拿刀乱砍，而是只有一个人操刀，其他人给予他各种支持，以提高效率和生产力。同时对于 Mills 的概念来说，至关重要的是编程**“从私人艺术到公共实践”的转换**。

如下图，参照目前外科手术团队的可行分工，开发团队也可抽象出管理员、编辑、副手、程序职员等角色职责进行分工，其中特别需要注意**该分工模式与传统团队分工模式的差别**：

- “外科医生”和“副手”需要了解所有的设计和全部的代码，确保概念完整性，而不是每人仅看自己部分的设计和实现；
- 出现观点差异时，不存在利益差别，可由“外科医生”单方面解决，关键在于对问题不进行分解和上下级的关系；
- 专业化分工使成员之间的沟通成本降低；

除了上述问题的解决方案，我们还需要面对如何面对团队扩建的问题，而其扩建过程的成功依赖于一个关键事实：**每部分的概念完整性得到了彻底的提高**。该事实能够使扩建需要协调的人员数量更少，而对于协调的问题依然需要使用分解的技术。

该协作模式对于开发团队来说，保证整个系统必须具备概念完整性的角色通常是系统架构师，为了方便管理则需要划分出体系结构设计和实现的界线，而系统架构师则主要关注前者。

> - 该章节所讲的内容，与我目前所在公司对于大型项目的分工几乎一样，即相较于传统的分工，特殊的角色概念有 PMO、POC、Owner 等，研发效率和交付速度等都会得到一定的提升，而且我理解该模式对于具体负责的团队人员来说，不仅是专业上的考量，也是一次综合能力的挑战。
> - 当我们在了解观点的时候，也需要尝试思考问题的本质，而不是像上面跟随问题来幼稚的二选一，我们需要明白每个观点选择它的理由和不选择它的理由，以此来根据具体场景判断做出取舍。
